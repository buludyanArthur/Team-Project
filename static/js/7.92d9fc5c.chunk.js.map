{"version":3,"sources":["components/add-books-form.js","pages/AddBooks.js"],"names":["AddBookForm","translate","useContext","TranslationContext","useState","title","setTitle","author","setAuthor","category","setCategory","price","setPrice","image","setImage","URL","setURL","progress","setProgress","className","onSubmit","e","preventDefault","storage","ref","name","put","on","snapshot","Math","floor","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","firebase","firestore","collection","add","parseInt","type","value","onChange","currentTarget","placeholder","required","src","alt","height","width","max","target","files","reader","FileReader","onloadend","result","readAsDataURL","Books"],"mappings":"qKAyHeA,EApHK,WAAO,IAChBC,EAAaC,qBAAWC,KAAxBF,UADe,EAEIG,mBAAS,IAFb,mBAEfC,EAFe,KAERC,EAFQ,OAGMF,mBAAS,IAHf,mBAGfG,EAHe,KAGPC,EAHO,OAIUJ,mBAAS,IAJnB,mBAIfK,EAJe,KAILC,EAJK,OAKIN,mBAAS,IALb,mBAKfO,EALe,KAKRC,EALQ,OAMGR,mBAAS,MANZ,mBAMfS,EANe,KAMRC,EANQ,OAODV,mBAAS,IAPR,mBAOfW,EAPe,KAOVC,EAPU,OASQZ,mBAAS,GATjB,mBAShBa,EATgB,KASNC,EATM,KAgEtB,OAEI,0BAAMC,UAAU,kBAAkBC,SAzCtC,SAAkBC,GACdA,EAAEC,iBACiBC,IAAQC,IAAR,iBAAsBX,EAAMY,OAAQC,IAAIb,GAChDc,GAAG,iBACd,SAACC,GAEG,IAAMX,EAAWY,KAAKC,MAAOF,EAASG,iBAAmBH,EAASI,WAAc,KAChFd,EAAYD,MACb,SAACgB,GAEAC,QAAQC,IAAIF,MAEhB,WAEIV,IAAQC,IAAI,UAAUY,MAAMvB,EAAMY,MAAMY,iBACnCC,MAAK,SAAAvB,GAAG,OAAIC,EAAOD,SAG5BwB,IACCC,YACAC,WAFD,SAGCC,IAAI,CACDrC,QACAE,SACAE,WACAE,MAAOgC,SAAShC,GAChBI,QAEHuB,MAAK,WACFhC,EAAS,IACTE,EAAU,IACVE,EAAY,IACZE,EAAS,IACTE,EAAS,MACTI,EAAY,GACZF,EAAO,SAOP,4BAAKf,EAAU,YACf,yBAAKkB,UAAU,cACf,yBAAKA,UAAU,cACX,yCAAqB,6BACrB,2BAAOA,UAAY,WAAWyB,KAAK,OAAOC,MAAOxC,EAAOyC,SAAW,SAAAzB,GAAC,OAAIf,EAASe,EAAE0B,cAAcF,QAAQG,YAAY,sBAAqBC,UAAQ,KAEtJ,yBAAK9B,UAAU,cACX,+BAAQlB,EAAU,UAAlB,KAAqC,6BACrC,2BAAOkB,UAAY,WAAWyB,KAAK,OAAOC,MAAOtC,EAAQuC,SAAW,SAAAzB,GAAC,OAAIb,EAAUa,EAAE0B,cAAcF,QAAQG,YAAY,uBAAsBC,UAAQ,KAEzJ,yBAAK9B,UAAU,cACX,+BAAQlB,EAAU,SAAlB,KAAoC,6BACpC,2BAAOkB,UAAY,WAAWyB,KAAK,SAASC,MAAOlC,EAAOmC,SAAW,SAAAzB,GAAC,OAAIT,EAASS,EAAE0B,cAAcF,QAAQG,YAAY,iBAAgBC,UAAQ,KAEnJ,yBAAK9B,UAAU,cACX,2CACA,4BAAS0B,MAAOpC,EAAUqC,SAAW,SAAAzB,GAAC,OAAIX,EAAYW,EAAE0B,cAAcF,QAAOI,UAAQ,GACrF,4BAAQJ,MAAM,IAAd,SAEA,0DACA,qDACA,2DACA,yDACA,4CAEA,uDACA,6CACA,gDACA,mDACA,4CACA,2CACA,4CACA,oCAAU5C,EAAU,cAKzB,yBAAKkB,UAAU,0BACV,yBAAKA,UAAU,cACX,yBAAK+B,IAAKnC,GAAM,sCAAuCoC,IAAI,UAAUC,OAAO,MAAMC,MAAM,QACxF,6BACA,8BAAUR,MAAO5B,EAAUqC,IAAI,QAC/B,2BAAOV,KAAK,OAAQE,SAjGpC,SAAuBzB,GACnB,GAAIA,EAAEkC,OAAOC,MAAM,GAAI,CACnB,IAAM3C,EAAQQ,EAAEkC,OAAOC,MAAM,GAC7B1C,EAASD,GACT,IAAI4C,EAAS,IAAIC,WAEjBD,EAAOE,UAAY,WACf3C,EAAOyC,EAAOG,SAElBH,EAAOI,cAAchD,KAwFiCoC,UAAQ,KAE1D,gCAAShD,EAAU,eCjHpB,SAAS6D,IACpB,OACI,6BACI,6BACA,kBAAC,EAAD,OAPZ","file":"static/js/7.92d9fc5c.chunk.js","sourcesContent":["import React, {useState, useContext } from 'react';\r\nimport firebase from '../config/Fire';\r\nimport {storage} from '../config/Fire';\r\nimport { TranslationContext } from '../translations/translations';\r\n\r\nconst AddBookForm = () => {\r\n    const {translate} = useContext(TranslationContext);\r\n    const [title, setTitle] = useState(``);\r\n    const [author, setAuthor] = useState(``);\r\n    const [category, setCategory] = useState(``);\r\n    const [price, setPrice] = useState(``);\r\n    const [image, setImage]= useState(null);\r\n    const [URL, setURL]= useState(``);\r\n    //image loading\r\n    const[progress, setProgress]= useState(0);\r\n\r\n    //choose image and preview before uploading\r\n    function handleChange (e) {\r\n        if (e.target.files[0]) {\r\n            const image = e.target.files[0];\r\n            setImage(image);\r\n            let reader = new FileReader();\r\n        \r\n            reader.onloadend = () => {\r\n                setURL(reader.result);\r\n            }\r\n            reader.readAsDataURL(image)\r\n        }       \r\n    };\r\n    \r\n    function onSubmit(e) {\r\n        e.preventDefault();\r\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n        uploadTask.on('state_changed', \r\n        (snapshot) => {\r\n            //progress\r\n            const progress = Math.floor((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n            setProgress(progress);\r\n        }, (error) => {\r\n            //error\r\n            console.log(error);\r\n        }, \r\n        () => {\r\n            //complate\r\n            storage.ref('images').child(image.name).getDownloadURL()\r\n                .then(URL => setURL(URL))\r\n        });           \r\n              \r\n        firebase\r\n        .firestore()\r\n        .collection(`books`)\r\n        .add({\r\n            title,\r\n            author,\r\n            category,\r\n            price: parseInt(price),\r\n            URL           \r\n        })\r\n        .then(() => {\r\n            setTitle(``);\r\n            setAuthor(``);\r\n            setCategory(``);\r\n            setPrice(``);\r\n            setImage(null);\r\n            setProgress(0);\r\n            setURL(``);\r\n        })     \r\n}\r\n\r\n    return ( \r\n        \r\n        <form className=\"admin-add-books\" onSubmit={onSubmit}>\r\n            <h4>{translate('addBook')}</h4>\r\n            <div className=\"float-left\">\r\n            <div className=\"input-line\">\r\n                <label>Title:</label><br/>\r\n                <input className = \"add-book\" type=\"text\" value={title} onChange ={e => setTitle(e.currentTarget.value)} placeholder=\"Enter book title...\"required/>\r\n            </div>\r\n            <div className=\"input-line\"> \r\n                <label>{translate('author')}:</label><br/>\r\n                <input className = \"add-book\" type=\"text\" value={author} onChange ={e => setAuthor(e.currentTarget.value)} placeholder=\"Enter book author...\"required/>\r\n            </div>\r\n            <div className=\"input-line\">\r\n                <label>{translate('price')}:</label><br/>\r\n                <input className = \"add-book\" type=\"number\" value={price} onChange ={e => setPrice(e.currentTarget.value)} placeholder=\"Enter price...\"required/>\r\n            </div>\r\n            <div className=\"input-line\">\r\n                <label>Category</label>\r\n                <select  value={category} onChange ={e => setCategory(e.currentTarget.value)}required>\r\n                <option value=\"\"> ----</option>\r\n                \r\n                <option> Biographies & Memoirs</option>\r\n                <option> Children's Books</option>\r\n                <option> Computers & Technology</option>\r\n                <option> Education & Teaching</option>\r\n                <option> History</option>\r\n                {/* Literature & Fiction */}\r\n                <option> Action & Adventure</option>\r\n                <option> Classics</option>\r\n                <option> Detectives </option>\r\n                <option> Dramas & Plays</option>\r\n                <option> Fantasy</option>\r\n                <option> Horror</option>\r\n                <option> Romance</option>\r\n                <option> {translate(\"novels\")}</option>\r\n            </select>\r\n            </div>\r\n            </div>\r\n           \r\n           <div className=\" float-left upload-img\">\r\n                <div className=\"upload-img\">\r\n                    <img src={URL|| 'https://via.placeholder.com/100x120'} alt=\"Preveiw\" height=\"120\" width=\"100\"/>\r\n                    <br/>\r\n                    <progress value={progress} max=\"100\"/>\r\n                    <input type=\"file\"  onChange = {handleChange} required/>\r\n                </div>\r\n                <button>{translate('addBook')}</button>\r\n            </div>\r\n        </form>       \r\n    )\r\n}\r\nexport default AddBookForm;","import React from 'react';\r\nimport AddBookForm from '../components/add-books-form';\r\n\r\nexport default function Books () {\r\n    return (\r\n        <div>\r\n            <br/>\r\n            <AddBookForm/>\r\n        </div>\r\n       \r\n    )\r\n}"],"sourceRoot":""}